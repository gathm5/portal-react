var helpers={sort:function(a,b,c,d){if(a.length<2)return a;var e=parseInt(a.length/2,10),f=a.slice(0,e),g=a.slice(e,a.length);return this.merge(this.sort(f,b,c,d),this.sort(g,b,c,d),b,c,d)},merge:function(a,b,c,d,e){for(var f=[];a.length&&b.length;){var g=a[0][c],h=b[0][c];switch(d){case"number":g=Number(a[0][c]),h=Number(b[0][c]);break;case"date":g=new Date(a[0][c]).getTime(),h=new Date(b[0][c]).getTime()}e<0&&g<=h||e>0&&g>h?f.push(a.shift()):f.push(b.shift())}for(;a.length;)f.push(a.shift());for(;b.length;)f.push(b.shift());return f}},normalSort=function(a,b,c){return a.sort(function(a,d){return a[b]<d[b]?1*c:a[b]>d[b]?-1*c:0})},timer;self.addEventListener("message",function(a){clearTimeout(timer);var b=self;timer=setTimeout(function(){var c=a.data.arr,d=a.data.field,e=a.data.type,f=a.data.direction;switch(e){case"number":case"date":b.postMessage(helpers.sort(c,d,e,f));break;default:b.postMessage(normalSort(c,d,f))}},0)});